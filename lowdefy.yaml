config:
  auth:
    createUsers: 'sign_up'
  publicHomePageId: welcome
  authHomePageId: dashboard

connections:
  - id: orders_mdb
    type: mongodb_collection
    properties:
      databaseUri:
        _secret: shopify_mdb
      databaseName: shopify
      collection: orders
      read: true
      write: true

  - id: orders_temp_mdb
    type: mongodb_collection
    properties:
      databaseUri:
        _secret: shopify_mdb
      databaseName: shopify
      collection: orders_temp
      read: true
      write: true

  - id: api_calls_mdb
    type: mongodb_collection
    properties:
      databaseUri:
        _secret: shopify_mdb
      databaseName: shopify
      collection: api_calls
      read: true
      write: true

  - id: shopify_orders
    type: axios_http
    properties:
      url: /admin/api/2020-01/orders.json
      method: get
      baseURL:
        _secret: shopify_api_url
      auth:
        _secret: shopify_api_auth

  - id: shopify_orders_count
    type: axios_http
    properties:
      url: /admin/api/2020-01/orders/count.json
      method: get
      baseURL:
        _secret: shopify_api_url
      auth:
        _secret: shopify_api_auth
      params:
        status: any

menus: 
  - id: default
    links:
      - id: dashboard
        type: menu_link
        pageId: dashboard
        properties:
          title: Dashboard
          icon: pie-chart
      - id: admin_group
        type: menu_group
        properties:
          title: Admin
          icon: control
        links:
          - id: update_orders
            type: menu_link
            pageId: update-orders
            properties:
              title: Update Orders
      - id: profile
        type: menu_link
        pageId: profile
        properties:
          title: Profile
          icon: user
pages:
  - _ref: welcome.yaml
  - _ref: api/update-orders.yaml
  - _ref: dashboard/dashboard.yaml